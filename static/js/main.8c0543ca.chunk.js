(this.webpackJsonpxivsim=this.webpackJsonpxivsim||[]).push([[0],{78:function(t,e,n){t.exports=n(93)},83:function(t,e,n){},89:function(t,e,n){},93:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"counter",(function(){return S})),n.d(a,"main",(function(){return Z})),n.d(a,"welcome",(function(){return et})),n.d(a,"dncdemo",(function(){return Rt}));var i,o=n(0),r=n.n(o),s=n(8),c=n.n(s),u=(n(83),n(22)),l=n(31),m=n(19),h=n(62),d=n(63),f=(n(89),n(26)),g=n(6),p=n(127),v=n(123),y=n(126),D=n(125),k=n(128),b=n(121),C=n(47);!function(t){t.INCREMENT="increment",t.DECREMENT="decrement",t.SET_JOURNEY="set_journey"}(i||(i={}));var T=Object(b.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),S=Object(u.b)((function(t){return{counter:t.counter}}))((function(t){var e=T();return r.a.createElement(v.a,{className:e.root},r.a.createElement(D.a,null,r.a.createElement(C.a,{className:e.title,color:"textSecondary",gutterBottom:!0},"Count: ",t.counter)),r.a.createElement(y.a,null,r.a.createElement(p.a,{variant:"outlined",color:"secondary",onClick:function(){t.dispatch({type:i.DECREMENT})}},"Decrement"),r.a.createElement(k.a,{orientation:"vertical"}),r.a.createElement(p.a,{variant:"outlined",color:"primary",onClick:function(){t.dispatch({type:i.INCREMENT})}},"Increment")))})),w=n(37),E=n(30),M=n(134),j=n(135),F=n(138),B=n(133),O=n(139),x=n(137),P=n(140),G=n(136),N=n(69),L=n.n(N),R=n(68),A=n.n(R),I=n(3),U={rootJourney:[{path:"",elementId:"main",children:[{path:"/",elementId:"welcome",label:"Home",icon:"home"},"divider",{path:"/DNCDemo",elementId:"dncdemo",label:"Dancer Demo"}]}]},W=n(132),J=n(44),H=n(129),q=n(130),z=n(141),_=n(131),V=n(67),X=n.n(V),Y=function(t){var e=t.icon,n=t.path,a=t.label,i=t.navigate,o=t.divider;return r.a.createElement(z.a,{button:!0,divider:o,onClick:function(){return i(n)}},e&&r.a.createElement(H.a,null,r.a.createElement(q.a,{fontSize:"small"},e)),r.a.createElement(_.a,{primary:a}))};var $=Object(u.b)((function(t){var e;return{rootJourney:(null===(e=t.journey)||void 0===e?void 0:e.rootJourney)||[]}}))((function(t){console.log("entered NavMenu FC",window.location.href);var e=t.rootJourney,n=Object(g.f)(),i=Object(o.useState)([]),s=Object(f.a)(i,2),c=s[0],u=s[1];return Object(o.useEffect)((function(){var t=function(t){return function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return console.log("entered makeNavItems with count=",n.length),console.log("views exports:",a),n.reduce((function(n,s,c){var u=Object(J.a)(n);if("divider"===s)u.push(r.a.createElement(k.a,{key:"".concat(o,".").concat(c)}));else{var l=X.a.join(i,s.path);s.label&&s.elementId&&a[s.elementId]&&u.push(r.a.createElement(Y,{icon:s.icon,path:l,label:s.label,navigate:t,key:"".concat(o,".").concat(c),divider:!!s.divider})),s.children&&(u=u.concat(e(s.children,l,o+1)))}return u}),[])}}(n)(e);u(t)}),[e]),r.a.createElement(W.a,null,c)})),K=Object(b.a)((function(t){return Object(P.a)({root:{display:"flex"},appBar:{transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})},menuButton:{marginRight:t.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(E.a)(Object(E.a)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:t.spacing(3),transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0},title:{flexGrow:1}})})),Q="MainLayout";function Z(){console.log(Q,"Entered MainLayout");var t=K(),e=r.a.useState(!1),n=Object(f.a)(e,2),a=n[0],i=n[1],o=function(){console.log(Q,"entered handleDrawerClosed"),i(!1)};return r.a.createElement("div",{className:t.root},r.a.createElement(B.a,null),r.a.createElement(M.a,{onClickAway:function(){console.log(Q,"onClickAway event"),o()}},r.a.createElement("div",null,r.a.createElement(j.a,{position:"fixed",className:Object(I.a)(t.appBar,Object(w.a)({},t.appBarShift,a))},r.a.createElement(G.a,null,r.a.createElement(x.a,{color:"inherit","aria-label":"open drawer",onClick:function(){console.log(Q,"entered handleDrawerOpen"),i(!0)},edge:"start",className:Object(I.a)(t.menuButton,a&&t.hide)},r.a.createElement(A.a,null)),r.a.createElement(C.a,{className:t.title,variant:"h6",noWrap:!0},"XIVSim"))),r.a.createElement(O.a,{className:t.drawer,variant:"persistent",anchor:"left",open:a,classes:{paper:t.drawerPaper}},r.a.createElement("div",{className:t.drawerHeader},r.a.createElement(x.a,{onClick:o},r.a.createElement(L.a,null))),r.a.createElement(k.a,null),r.a.createElement($,null)))),r.a.createElement("main",{className:Object(I.a)(t.content,Object(w.a)({},t.contentShift,a))},r.a.createElement("div",{className:t.drawerHeader}),r.a.createElement(F.a,null,r.a.createElement(g.a,null))))}var tt=Object(b.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),et=function(){var t=tt();return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{className:t.root},r.a.createElement(D.a,null,r.a.createElement(C.a,{className:t.title,color:"textSecondary",gutterBottom:!0},"Welcome"),r.a.createElement(C.a,{variant:"body2",component:"p"},"Welcome to XIVSim")),r.a.createElement(y.a,null,r.a.createElement(p.a,{size:"small"},"Learn More"))))},nt=n(20),at=n(21),it=n(45),ot=n(43),rt=n(70),st=n.n(rt),ct={hp:105,mp:79,str:90,vit:100,dex:115,int:85,mnd:80,mainStat:function(){return ct.dex},autoAttackStat:function(){return ct.dex}},ut={flourishingCascade:{name:"Flourishing Cascade",duration:20},flourishingFountain:{name:"Flourishing Fountain",duration:20},flourishingWindmill:{name:"Flourishing Windmill",duration:20},flourishingShower:{name:"Flourishing Shower",duration:20},flourishingFanDance:{name:"Flourishing Fan Dance",duration:20}},lt={name:"Standard Finish",duration:60},mt={name:"Technical Finish",duration:20},ht={name:"Devilment",duration:20},dt={potency:110,traitDamageMult:1,autoAttackDelay:3.12},ft={name:"Cascade",baseCastTime:0,baseRecastTime:2.5,potency:250,traitDamageMult:1.2,isGCD:!0,comboInteraction:!0,proc:ut.flourishingCascade,procChance:.5,animationLock:.75},gt={cascade:ft,reverseCascade:{name:"Reverse Cascade",baseCastTime:0,baseRecastTime:2.5,potency:300,traitDamageMult:1.2,isGCD:!0,animationLock:.75},fountain:{name:"Fountain",baseCastTime:0,baseRecastTime:2.5,potency:100,comboPotency:300,comboActions:[ft],traitDamageMult:1.2,isGCD:!0,comboInteraction:!0,proc:ut.flourishingFountain,procChance:.5,animationLock:.75},fountainFall:{name:"Fountainfall",baseCastTime:0,baseRecastTime:2.5,potency:350,traitDamageMult:1.2,isGCD:!0,animationLock:.75},risingWindmill:{name:"Rising Windmill",baseCastTime:0,baseRecastTime:2.5,potency:300,traitDamageMult:1.2,isGCD:!0,animationLock:.75},bloodshower:{name:"Bloodshower",baseCastTime:0,baseRecastTime:2.5,potency:350,traitDamageMult:1.2,isGCD:!0,animationLock:.75},saberDance:{name:"Saber Dance",baseCastTime:0,baseRecastTime:2.5,potency:600,traitDamageMult:1.2,isGCD:!0,animationLock:.75},flourish:{name:"Flourish",baseCastTime:0,baseRecastTime:60,cooldown:60,traitDamageMult:0,isGCD:!1,animationLock:.75},standardStep:{name:"Standard Step",baseCastTime:0,baseRecastTime:1.5,cooldown:30,traitDamageMult:0,isGCD:!0,animationLock:1.5},technicalStep:{name:"Technical Step",baseCastTime:0,baseRecastTime:1.5,cooldown:120,traitDamageMult:0,isGCD:!0,animationLock:1.5},step:{name:"Step",baseCastTime:0,baseRecastTime:1,traitDamageMult:0,isGCD:!0,animationLock:1},standardFinish:{name:"Standard Finish",baseCastTime:0,baseRecastTime:1.5,potency:1e3,traitDamageMult:1.2,isGCD:!0,animationLock:.75},prePullStandard:{name:"Standard Finish",baseCastTime:0,baseRecastTime:1.5,potency:1e3,traitDamageMult:1.2,isGCD:!0,animationLock:.75},technicalFinish:{name:"Technical Finish",baseCastTime:0,baseRecastTime:1.5,potency:1500,traitDamageMult:1.2,isGCD:!0,animationLock:.75},fanDance:{name:"Fan Dance",baseCastTime:0,baseRecastTime:.75,potency:150,cooldown:1.01,traitDamageMult:1.2,isGCD:!1,animationLock:.75,proc:ut.flourishingFanDance,procChance:.5},fanDance3:{name:"Fan Dance III",baseCastTime:0,baseRecastTime:1,potency:200,cooldown:1,traitDamageMult:1.2,isGCD:!1,animationLock:.75},devilment:{name:"Devilment",baseCastTime:0,baseRecastTime:120,cooldown:120,traitDamageMult:0,isGCD:!1,animationLock:.75}},pt={dancer:ct},vt=n(38),yt=n(18),Dt=function(t,e){return Math.random()*(e-t)+t},kt=function(t){return t/100},bt=function(t){return Math.floor(165*(t-340)/340+100)/100},Ct=function(t,e){return Math.floor(130*(e-t.main)/t.div+1e3)/1e3},Tt=function(t,e){return Math.floor(100*(e-t.sub)/t.div+1e3)/1e3},St=function(t,e){return Math.floor(550*(e-t.sub)/t.div)/10},wt=function(t,e){return Math.floor(200*(e-t.sub)/t.div+50)/10},Et=function(t,e){return Math.floor(200*(e-t.sub)/t.div+1400)/1e3},Mt=function(t,e,n,a,i,o,r,s,c,u,l){return l=l||Dt(.95,1.05),Math.floor(Math.floor(Math.floor(kt(t)*function(t,e,n,a){return Math.floor(Math.floor(t.main*e/1e3+n)*(a/3))}(e,n,a,i)*bt(o)*Ct(e,r)*Tt(e,s)*c)*function(t,e){return Math.floor(130*(e-t.sub)/t.div+1e3)/1e3}(e,u))*l)},jt=function(t,e,n,a,i,o,r,s,c){return c=c||Dt(.95,1.05),Math.floor(Math.floor(kt(t)*function(t,e,n){return Math.floor(t.main*e/1e3+n)}(e,n,a)*bt(i)*Ct(e,o)*Tt(e,r)*s)*c)},Ft=function(){function t(e,n,a,i){Object(nt.a)(this,t),this.player=void 0,this.levelMod=void 0,this.printLog=void 0,this.currentTime=void 0,this.maxTime=void 0,this.damageDealt=void 0,this.gcdTimer=void 0,this.autoAttackTimer=void 0,this.comboTimer=void 0,this.comboAction=void 0,this.log=void 0,this.cooldowns=void 0,this.animLock=void 0,this.buffs=void 0,this.player=e,this.levelMod=n,this.printLog=i,this.currentTime=0,this.maxTime=100*a,this.damageDealt=0,this.gcdTimer=0,this.comboTimer=0,this.autoAttackTimer=0,this.log=[],this.cooldowns=[],this.animLock=0,this.buffs=[]}return Object(at.a)(t,[{key:"dealDamage",value:function(t){this.damageDealt+=t}},{key:"jumpToNextGCD",value:function(){this.jumpTimeBy(this.gcdTimer)}},{key:"jumpToAutoAttack",value:function(){this.jumpTimeBy(this.autoAttackTimer)}},{key:"jumpAnimationLock",value:function(){this.jumpTimeBy(this.animLock)}},{key:"jumpTimeBy",value:function(t){this.currentTime+=t,this.gcdTimer=Math.max(this.gcdTimer-t,0),this.autoAttackTimer=Math.max(this.autoAttackTimer-t,0),this.comboTimer=Math.max(this.comboTimer-t,0),this.animLock=Math.max(this.animLock-t,0),this.cooldownsJumpBy(t),this.buffsJumpBy(t)}},{key:"summary",value:function(){return{totalDamage:this.damageDealt,dps:(100*this.damageDealt/this.currentTime).toFixed(2),duration:this.currentTime/100,totalActions:this.log.length}}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"useSkill",value:function(t){var e,n=this.getCurrentTime(),a=t.potency?t.potency:0;t.comboPotency&&this.comboTimer>0&&(null===(e=t.comboActions)||void 0===e?void 0:e.includes(this.comboAction))&&(a=t.comboPotency,this.comboTimer=0);var i=!1,o=!1,r=0;if(a>0){var s=jt(a,this.levelMod,this.player.jobMod.mainStat(),this.player.stats.weaponDamage,this.player.stats.mainStat,this.player.stats.det,this.player.stats.tenacity,1.2),c=wt(this.levelMod,this.player.stats.crit)/100+this.calcCritChanceFromBuffs(),u=St(this.levelMod,this.player.stats.dhit)/100+this.calcDHitChanceFromBuffs();r=Math.floor(s*this.calcDamageMultFromBuffs()),Math.random()<=c&&(r=Math.floor(r*Et(this.levelMod,this.player.stats.crit)),i=!0),Math.random()<=u&&(r=Math.floor(1.25*r),o=!0)}else r=0;var l={name:t.name,damage:r,totalDamage:this.damageDealt,potency:a,directHit:o,crit:i,timestamp:n};return t.comboInteraction&&(this.comboAction=t,this.comboTimer=1e3),t.animationLock&&(this.animLock=100*t.animationLock),l}},{key:"useOGCD",value:function(t){return t.potency?this.useSkill(t):(t.animationLock&&(this.animLock=t.animationLock),{timestamp:this.getCurrentTime(),comment:"Used ".concat(t.name)})}},{key:"useAutoAttack",value:function(t){var e=this.getCurrentTime(),n=Mt(t.potency,this.levelMod,this.player.jobMod.autoAttackStat(),this.player.stats.weaponDamage,t.autoAttackDelay,this.player.stats.mainStat,this.player.stats.det,this.player.stats.tenacity,t.traitDamageMult,this.player.stats.skillSpeed),a=wt(this.levelMod,this.player.stats.crit)/100+this.calcCritChanceFromBuffs(),i=St(this.levelMod,this.player.stats.dhit)/100+this.calcDHitChanceFromBuffs(),o=Math.floor(n*this.calcDamageMultFromBuffs()),r=!1,s=!1;return Math.random()<=a&&(o=Math.floor(o*Et(this.levelMod,this.player.stats.crit)),r=!0),Math.random()<=i&&(o=Math.floor(1.25*o),s=!0),{name:"Auto Attack",damage:o,totalDamage:this.damageDealt,potency:t.potency,directHit:s,crit:r,timestamp:e}}},{key:"getCooldown",value:function(t){return this.cooldowns.find((function(e){return e.name===t}))}},{key:"removeCooldown",value:function(t){this.cooldowns=this.cooldowns.filter((function(e){return e.name!==t.name}))}},{key:"addCooldown",value:function(t){this.getCooldown(t.name)&&this.removeCooldown(t),this.cooldowns.push({name:t.name,duration:100*t.duration}),this.cooldowns.sort((function(t,e){return t.duration-e.duration}))}},{key:"cooldownsJumpBy",value:function(t){var e=this.cooldowns.map((function(e){return e.duration=e.duration-t,e}));this.cooldowns=e.filter((function(t){return t.duration>.001}))}},{key:"getBuff",value:function(t){return this.buffs.find((function(e){return e.name===t}))}},{key:"getBuffs",value:function(){return this.buffs}},{key:"removeBuff",value:function(t){this.buffs=this.buffs.filter((function(e){return e.name!==t.name}))}},{key:"addBuff",value:function(t){this.getBuff(t.name)&&this.removeBuff(t),this.buffs.push({name:t.name,duration:100*t.duration}),this.buffs.sort((function(t,e){return t.duration-e.duration}))}},{key:"buffsJumpBy",value:function(t){var e=this.buffs.map((function(e){return e.duration=e.duration-t,e}));this.buffs=e.filter((function(t){return t.duration>.001}))}},{key:"triggerGCD",value:function(t){this.gcdTimer=t}},{key:"calcDamageMultFromBuffs",value:function(){return 1}},{key:"calcCritChanceFromBuffs",value:function(){return 0}},{key:"calcDHitChanceFromBuffs",value:function(){return 0}},{key:"createDataPoints",value:function(){var t=[[0,0]];return this.log.forEach((function(e){0!==e.damage&&(e.timestamp/100===t[t.length-1][0]?t[t.length-1][1]=t[t.length-1][1]+e.damage:t.push([e.timestamp/100,e.damage]))})),t}},{key:"createDataPointsPerSecond",value:function(){var t=[[0,0]];return this.log.forEach((function(e){0!==e.damage&&(Math.floor(e.timestamp/100)===t[t.length-1][0]?t[t.length-1][1]=t[t.length-1][1]+e.damage:t.push([Math.floor(e.timestamp/100),e.damage]))})),t}},{key:"createDataPointsPerSecondNew",value:function(){for(var t=[],e=0;e<Math.ceil(this.log[this.log.length-1].timestamp/100)+1;e++)t.push([e,0]);return console.log("Length: ",t.length),console.log(t),this.log.forEach((function(e){t[Math.ceil(e.timestamp/100)][1]=t[Math.ceil(e.timestamp/100)][1]+e.damage})),t}}]),t}(),Bt=function(){function t(){Object(nt.a)(this,t),this.esprit=void 0,this.feathers=void 0,this.maxEsprit=void 0,this.maxFeathers=void 0,this.procs=void 0,this.stepsRemaining=void 0,this.inStandard=void 0,this.inTechnical=void 0,this.esprit=0,this.feathers=0,this.maxEsprit=100,this.maxFeathers=4,this.procs=[],this.stepsRemaining=0,this.inStandard=!1,this.inTechnical=!1}return Object(at.a)(t,[{key:"getEsprit",value:function(){return this.esprit}},{key:"getFeathers",value:function(){return this.feathers}},{key:"addEsprit",value:function(t){var e=Math.min(this.maxEsprit-this.esprit,t);return this.esprit=this.esprit+e,e}},{key:"addFeather",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=Math.min(this.maxFeathers-this.feathers,t);return this.feathers=this.feathers+e,e}},{key:"removeEsprit",value:function(t){return!(this.esprit<t)&&(this.esprit=this.esprit-t,!0)}},{key:"removeFeather",value:function(){return!(this.feathers<1)&&(this.feathers=this.feathers-1,!0)}},{key:"getProcs",value:function(){return this.procs}},{key:"getProcByName",value:function(t){return this.procs.find((function(e){return e.name===t}))}},{key:"removeProc",value:function(t){this.procs=this.procs.filter((function(e){return e.name!==t.name}))}},{key:"addProc",value:function(t){this.getProcByName(t.name)&&this.removeProc(t),this.procs.push({name:t.name,duration:100*t.duration}),this.procs.sort((function(t,e){return t.duration-e.duration}))}},{key:"procsJumpBy",value:function(t){var e=this.procs.map((function(e){return e.duration=e.duration-t,e}));this.procs=e.filter((function(t){return t.duration>0}))}},{key:"getStepsRemaining",value:function(){return this.stepsRemaining}},{key:"removeStep",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.stepsRemaining=Math.max(this.stepsRemaining-t,0)}},{key:"setRemainingSteps",value:function(t){this.stepsRemaining=t}},{key:"setInStandard",value:function(t){t?(this.inStandard=!0,this.setRemainingSteps(2)):this.inStandard=!1}},{key:"setInTechnical",value:function(t){t?(this.inTechnical=!0,this.setRemainingSteps(4)):this.inTechnical=!1}},{key:"getInStandard",value:function(){return this.inStandard}},{key:"getInTechnical",value:function(){return this.inTechnical}},{key:"getInDance",value:function(){return this.getInStandard()||this.getInTechnical()}}]),t}(),Ot=function(t){Object(it.a)(n,t);var e=Object(ot.a)(n);function n(t,a,i,o,r){var s;return Object(nt.a)(this,n),(s=e.call(this,t,a,i,r)).opener=void 0,s.state=void 0,s.teamGCD=void 0,s.queuedSkill=void 0,s.opener=o,s.state=new Bt,s.teamGCD=0,s.registerProcs(),s.registerCooldowns(),s}return Object(at.a)(n,[{key:"getDancerComment",value:function(){return{feathers:this.state.getFeathers(),esprit:this.state.getEsprit(),procs:this.state.getProcs().reduce((function(t,e){return t+"".concat(e.name,"(").concat((e.duration/100).toFixed(2),") ")}),""),buffs:this.getBuffs().reduce((function(t,e){return t+"".concat(e.name,"(").concat((e.duration/100).toFixed(2),") ")}),""),cooldowns:this.cooldowns.reduce((function(t,e){return t+"".concat(e.name,"(").concat((e.duration/100).toFixed(2),") ")}),""),gcdTimer:this.gcdTimer}}},{key:"useSkill",value:function(t){var e=Object(vt.a)(Object(yt.a)(n.prototype),"useSkill",this).call(this,t);return t.onUse&&t.onUse(this.state),e.comment=this.getDancerComment(),e}},{key:"useOGCD",value:function(t){var e=Object(vt.a)(Object(yt.a)(n.prototype),"useOGCD",this).call(this,t);return t.onUse&&t.onUse(this.state),e.comment=this.getDancerComment(),e.name?e:{name:t.name,damage:0,totalDamage:this.damageDealt,potency:0,directHit:!1,crit:!1,timestamp:e.timestamp,comment:e.comment}}},{key:"useAutoAttack",value:function(t){var e=Object(vt.a)(Object(yt.a)(n.prototype),"useAutoAttack",this).call(this,t);return e.comment=this.getDancerComment(),e}},{key:"calcDamageMultFromBuffs",value:function(){var t=1;return this.getBuffs().forEach((function(e){switch(e.name){case lt.name:case mt.name:t*=1.05}})),t}},{key:"calcCritChanceFromBuffs",value:function(){var t=0;return this.getBuffs().forEach((function(e){switch(e.name){case ht.name:t+=.2}})),t}},{key:"calcDHitChanceFromBuffs",value:function(){var t=0;return this.getBuffs().forEach((function(e){switch(e.name){case ht.name:t+=.2}})),t}},{key:"printDamageLogLine",value:function(t){var e,n,a,i="".concat((t.timestamp/100).toFixed(2).padStart(6," "),"| ").concat(t.potency.toString().padStart(4," "),"p | Feathers: ").concat(null===(e=t.comment)||void 0===e?void 0:e.feathers," Esprit: ").concat(null===(n=t.comment)||void 0===n?void 0:n.esprit.toString().padStart(3," ")," | ").concat(t.damage.toString().padStart(6," ")," | ").concat(t.name," ");t.crit&&(i+="C"),t.directHit&&(i+="D"),i+=" | Procs: ".concat(null===(a=t.comment)||void 0===a?void 0:a.procs),console.log(i)}},{key:"jumpTimeBy",value:function(t){this.state.procsJumpBy(t),this.teamGCD=Math.max(this.teamGCD-t,0),Object(vt.a)(Object(yt.a)(n.prototype),"jumpTimeBy",this).call(this,t)}},{key:"simulateTeamGCD",value:function(){var t=0;this.getBuff(mt.name)?t=7:this.getBuff(lt.name)&&(t=2);for(var e=0;e<t;e++)this.generateEsprit(.2)}},{key:"getNextGCD",value:function(){if(this.state.getInDance()){if(this.state.getStepsRemaining()>0)return gt.step;if(0===this.state.getStepsRemaining()){if(this.state.getInStandard())return gt.standardFinish;if(this.state.getInTechnical())return gt.technicalFinish}}if(!this.getCooldown(gt.standardStep.name))return gt.standardStep;if(!this.getCooldown(gt.technicalStep.name))return gt.technicalStep;var t=this.getCooldown(gt.flourish.name)?this.getCooldown(gt.flourish.name).duration:0;return this.state.getEsprit()>=50&&0===this.getShortestGCDProcTimer().procs&&t<=250?gt.saberDance:this.getShortestGCDProcTimer().procs>0&&t<=250||250*this.getShortestGCDProcTimer().procs>this.getShortestGCDProcTimer().duration?this.getGCDProcToUse():this.state.getEsprit()>=50&&this.shouldUseSaberDance()?gt.saberDance:this.getGCDProcToUse()?this.getGCDProcToUse():this.comboAction==gt.cascade?gt.fountain:gt.cascade}},{key:"jumpToNextEvent",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=[this.autoAttackTimer,this.gcdTimer,this.teamGCD,null===(t=this.cooldowns[0])||void 0===t?void 0:t.duration];e||n.push(this.animLock),(n=n.sort((function(t,e){return t-e})))[0]&&this.jumpTimeBy(n[0])}},{key:"doNextAction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.jumpToNextEvent(t),!this.queuedSkill&&this.opener.length>0&&(this.queuedSkill=this.opener.shift()),0===this.teamGCD&&(this.simulateTeamGCD(),this.teamGCD=250),0===this.autoAttackTimer)return this.doAutoAttack();if(this.queuedSkill){if(0===this.gcdTimer&&this.queuedSkill.isGCD){var e=this.queuedSkill;return this.queuedSkill=null,this.doNextGCD(e)}if(0===this.animLock){if(!this.queuedSkill.isGCD){var n=this.queuedSkill;return this.queuedSkill=null,this.doNextOGCD(n)}this.jumpToNextEvent(!0)}}else{if(0===this.gcdTimer)return this.doNextGCD();if(0===this.animLock){var a=this.getNextOGCD();if(a)return this.doNextOGCD();this.jumpToNextEvent(!0)}}return null}},{key:"getNextOGCD",value:function(){return this.animLock>0?null:!this.getCooldown(gt.devilment.name)&&100*gt.devilment.animationLock<=this.gcdTimer&&this.shouldUseDevilment()?gt.devilment:!this.getCooldown(gt.flourish.name)&&100*gt.flourish.animationLock<=this.gcdTimer&&this.shouldUseFlourish()?gt.flourish:!this.getCooldown(gt.fanDance3.name)&&100*gt.fanDance3.animationLock<=this.gcdTimer&&this.state.getProcByName(ut.flourishingFanDance.name)?gt.fanDance3:!this.getCooldown(gt.fanDance.name)&&100*gt.fanDance.animationLock<=this.gcdTimer&&this.shouldUseFanDance()?gt.fanDance:null}},{key:"doNextOGCD",value:function(t){var e;return t||(t=this.getNextOGCD()),(e=this.useSkill(t)).damage>0&&this.dealDamage(e.damage),e}},{key:"doNextGCD",value:function(t){this.jumpToNextGCD(),t||(t=this.getNextGCD());var e=this.useSkill(t);return this.dealDamage(e.damage),this.gcdTimer=100*t.baseRecastTime,e}},{key:"doAutoAttack",value:function(){this.jumpToAutoAttack();var t=this.useAutoAttack(dt);return this.dealDamage(t.damage),this.autoAttackTimer=100*dt.autoAttackDelay,t}},{key:"run",value:function(){for(var t;this.getCurrentTime()<this.maxTime;)(t=this.doNextAction())&&this.log.push(t)}},{key:"registerProcs",value:function(){var t=this;gt.cascade.onUse=function(e){t.generateEsprit(),Math.random()<gt.cascade.procChance&&t.state.addProc(gt.cascade.proc)},gt.fountain.onUse=function(e){t.generateEsprit(),Math.random()<gt.fountain.procChance&&t.state.addProc(gt.fountain.proc)},gt.fanDance.onUse=function(e){Math.random()<gt.fanDance.procChance&&t.state.addProc(gt.fanDance.proc),t.addCooldown({name:gt.fanDance.name,duration:gt.fanDance.cooldown}),t.state.removeFeather()},gt.fanDance3.onUse=function(e){t.state.removeProc(ut.flourishingFanDance),t.addCooldown({name:gt.fanDance3.name,duration:gt.fanDance3.cooldown})},gt.reverseCascade.onUse=function(e){t.generateEsprit(),t.state.removeProc(ut.flourishingCascade),t.featherProc(.5)},gt.fountainFall.onUse=function(e){t.generateEsprit(),t.state.removeProc(ut.flourishingFountain),t.featherProc(.5)},gt.risingWindmill.onUse=function(e){t.generateEsprit(),t.state.removeProc(ut.flourishingWindmill),t.featherProc(.5)},gt.bloodshower.onUse=function(e){t.generateEsprit(),t.state.removeProc(ut.flourishingShower),t.featherProc(.5)},gt.saberDance.onUse=function(e){t.state.removeEsprit(50)}}},{key:"registerCooldowns",value:function(){var t=this;gt.flourish.onUse=function(e){t.addCooldown({name:gt.flourish.name,duration:gt.flourish.cooldown}),t.state.addProc(ut.flourishingCascade),t.state.addProc(ut.flourishingFountain),t.state.addProc(ut.flourishingWindmill),t.state.addProc(ut.flourishingShower),t.state.addProc(ut.flourishingFanDance)},gt.devilment.onUse=function(e){t.addCooldown({name:gt.devilment.name,duration:gt.devilment.cooldown}),t.addBuff({name:ht.name,duration:ht.duration})},gt.standardStep.onUse=function(e){t.addCooldown({name:gt.standardStep.name,duration:gt.standardStep.cooldown}),t.triggerGCD(1.5),t.state.setRemainingSteps(2),t.state.setInStandard(!0)},gt.technicalStep.onUse=function(e){t.addCooldown({name:gt.technicalStep.name,duration:gt.technicalStep.cooldown}),t.triggerGCD(1.5),t.state.setRemainingSteps(4),t.state.setInTechnical(!0)},gt.step.onUse=function(e){t.triggerGCD(1),t.state.removeStep()},gt.standardFinish.onUse=function(e){t.triggerGCD(1.5),t.state.setInStandard(!1),t.addBuff({name:lt.name,duration:lt.duration})},gt.prePullStandard.onUse=function(e){t.triggerGCD(1.5),t.state.setInStandard(!1),t.addBuff({name:lt.name,duration:lt.duration}),t.addCooldown({name:gt.standardStep.name,duration:gt.standardStep.cooldown-15})},gt.technicalFinish.onUse=function(e){t.triggerGCD(1.5),t.state.setInTechnical(!1),t.addBuff({name:mt.name,duration:mt.duration})}}},{key:"featherProc",value:function(t){return Math.random()<t&&(this.state.addFeather(),!0)}},{key:"shouldUseFlourish",value:function(){return!this.state.getProcByName(ut.flourishingFanDance.name)}},{key:"shouldUseFanDance",value:function(){return!(!this.isBursting()&&(this.state.getProcByName(ut.flourishingFanDance.name)||this.state.getFeathers()<4))&&this.state.getFeathers()>0}},{key:"generateEsprit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.3;Math.random()<t&&this.state.addEsprit(10)}},{key:"shouldUseDevilment",value:function(){return!!this.getBuff(mt.name)}},{key:"shouldUseSaberDance",value:function(){return!!(this.state.getEsprit()>80||this.isBursting())}},{key:"isBursting",value:function(){return!!this.getBuff(mt.name)}},{key:"getGCDProcToUse",value:function(){return this.state.getProcByName(ut.flourishingFountain.name)?gt.fountainFall:this.state.getProcByName(ut.flourishingShower.name)?gt.bloodshower:this.state.getProcByName(ut.flourishingCascade.name)?gt.reverseCascade:this.state.getProcByName(ut.flourishingWindmill.name)?gt.risingWindmill:null}},{key:"getShortestGCDProcTimer",value:function(){var t,e,n,a,i=[null===(t=this.state.getProcByName(ut.flourishingFountain.name))||void 0===t?void 0:t.duration,null===(e=this.state.getProcByName(ut.flourishingShower.name))||void 0===e?void 0:e.duration,null===(n=this.state.getProcByName(ut.flourishingCascade.name))||void 0===n?void 0:n.duration,null===(a=this.state.getProcByName(ut.flourishingWindmill.name))||void 0===a?void 0:a.duration].filter((function(t){return t>0}));return{duration:Math.min.apply(Math,Object(J.a)(i)),procs:i.length}}}]),n}(Ft),xt={mp:1e4,main:340,sub:380,div:3300,threat:569},Pt=n(53),Gt=n.n(Pt),Nt=function(t){Object(it.a)(n,t);var e=Object(ot.a)(n);function n(t){var a;Object(nt.a)(this,n),a=e.call(this,t);for(var i={stats:{mainStat:4871,weaponDamage:128,crit:3969,det:2067,dhit:2762,spellSpeed:380,skillSpeed:380,tenacity:380},jobMod:pt.dancer},o=[gt.prePullStandard,gt.technicalStep,gt.step,gt.step,gt.step,gt.step,gt.technicalFinish,gt.flourish,gt.risingWindmill,gt.devilment],r=new Ot(i,xt,600,o),s=[],c=0;c<1;c++)r.run(),s.push(r.createDataPointsPerSecondNew());var u=[];return s[0].forEach((function(t,e){u.push([t[0],s.reduce((function(t,n){return t+n[e][1]}),0)/s.length])})),r.log.forEach((function(t){r.printDamageLogLine(t)})),console.log(u),console.log(s),a.state={options:{chart:{id:"apexchart-example"},xaxis:{type:"numeric"},stroke:{curve:"smooth"}},series:[{name:"dps2",data:Gt()(Gt()(u,30,(function(t){return t[1]}),(function(t,e){return[t[0],Math.floor(e)]})),5,(function(t){return t[1]}),(function(t,e){return[t[0],Math.floor(e)]}))}]},a}return Object(at.a)(n,[{key:"render",value:function(){return r.a.createElement(st.a,{options:this.state.options,series:this.state.series,type:"line",width:500,height:320})}}]),n}(o.Component),Lt=Object(b.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),Rt=function(){Lt();return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,null,r.a.createElement(D.a,null,r.a.createElement(Nt,null))))},At=function(t){return Object(o.createElement)(a[t.elementId])},It=Object(u.b)((function(t){var e;return{routes:null===(e=t.journey)||void 0===e?void 0:e.rootJourney}}),(function(t){return{setJourn:function(){var e;t((e=U,{type:i.SET_JOURNEY,payload:e}))}}}))((function(t){console.log("entered DynamicRouter FC",window.location.href);var e=t.routes,n=t.setJourn,i=Object(o.useState)([]),r=Object(f.a)(i,2),s=r[0],c=r[1];return Object(o.useEffect)((function(){n();var e=function t(e){return console.log("entered makeRoutesConfig"),e.filter((function(t){return"object"===typeof t})).filter((function(t){return void 0!==a[t.elementId]})).map((function(e){var n={path:e.path,element:At(e)};return"object"===typeof e&&e.children&&(n.children=t(e.children)),n}))}(t.routes);c(e)}),[e]),Object(g.h)(s)})),Ut=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case i.DECREMENT:return t-1;case i.INCREMENT:return t+1;default:return t}},Wt={rootJourney:[U]},Jt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,e=arguments.length>1?arguments[1]:void 0;switch(console.log("in journeyReducer with action.type",e.type),e.type){case i.SET_JOURNEY:return console.log("in journeyReducer with payload",e.payload),Object(E.a)(Object(E.a)({},t),e.payload);default:return t}},Ht=Object(m.combineReducers)({counter:Ut,journey:Jt}),qt=Object(m.createStore)(Ht,Object(h.composeWithDevTools)(Object(m.applyMiddleware)(d.a))),zt=function(t){return console.log("public: ","/XIVSim"),r.a.createElement(u.a,{store:qt},r.a.createElement(l.a,null,r.a.createElement(It,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(zt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[78,1,2]]]);
//# sourceMappingURL=main.8c0543ca.chunk.js.map